<ion-header>
    <ion-toolbar>
        <ion-title>Explicador</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>

    <form [formGroup]="explainerForm" (ngSubmit)="explainerAdd(explainerForm.value)">

        <ion-item-divider (click)="getLocation()">
            <ion-icon name="locate-outline"></ion-icon>
            <ion-label *ngIf="located==false">&nbsp; &nbsp; Obtendo sua localização</ion-label>
            <ion-spinner *ngIf="located==false" class="spinner" name="dots"></ion-spinner>
            <ion-label *ngIf="located && this.address != ''">&nbsp; &nbsp; {{ this.address }}</ion-label>
        </ion-item-divider>

        <mat-vertical-stepper>
            <mat-step label="Conta">
                <ion-item>
                    <ion-label position="floating">Email</ion-label>
                    <ion-input type="email" formControlName="email"></ion-input>
                </ion-item>
                <div *ngIf="explainerForm.controls['email'].invalid && (explainerForm.controls['email'].dirty || explainerForm.controls['email'].touched)"
                    class="alert alert-danger">
                    <div *ngIf="explainerForm.controls['email'].errors.required">
                        <ion-badge color="danger" shape="round">
                            <ion-text>email is required.</ion-text>
                        </ion-badge>
                    </div>
                    <div *ngIf="explainerForm.controls['email'].errors.pattern">
                        <ion-badge color="danger">
                            <ion-text>is not a email, type (exampe@exampe.com).</ion-text>
                        </ion-badge>
                    </div>
                </div>

                <ion-item>
                    <ion-label position="floating">Senha</ion-label>
                    <ion-input type="password" formControlName="password"></ion-input>
                </ion-item>
                <div *ngIf="explainerForm.controls['password'].invalid && (explainerForm.controls['password'].dirty || explainerForm.controls['password'].touched)"
                    class="alert alert-danger">
                    <div *ngIf="explainerForm.controls['password'].errors.required">
                        <ion-badge color="danger">
                            <ion-text>title is required.</ion-text>
                        </ion-badge>
                    </div>
                    <div *ngIf="explainerForm.controls.password.errors.minlength">
                        <ion-badge color="danger">
                            <ion-text>title must be at least 6 characters long.</ion-text>
                        </ion-badge>
                    </div>
                </div>

                <div>
                    <button type="button" mat-raised-button mat-button matStepperNext>proximo></button>
                </div>
            </mat-step>
            <mat-step label="Outros detalhes">
                <ion-item>
                    <ion-label position="floating">Nome</ion-label>
                    <ion-input formControlName="name"></ion-input>
                </ion-item>
                <div *ngIf="explainerForm.controls['name'].invalid && (explainerForm.controls['name'].dirty || explainerForm.controls['name'].touched)"
                    class="alert alert-danger">
                    <div *ngIf="explainerForm.controls['name'].errors.required">
                        <ion-badge color="danger">
                            <ion-text>O campo é obrigatório.</ion-text>
                        </ion-badge>
                    </div>
                </div>


                <ion-item>
                    <ion-label position="floating">Slogan</ion-label>
                    <ion-input formControlName="slogan"></ion-input>
                </ion-item>
                <div *ngIf="explainerForm.controls['slogan'].invalid && (explainerForm.controls['slogan'].dirty || explainerForm.controls['slogan'].touched)"
                    class="alert alert-danger">
                    <div *ngIf="explainerForm.controls['slogan'].errors.required">
                        <ion-badge color="danger">
                            <ion-text>O campo é obrigatório.</ion-text>
                        </ion-badge>
                    </div>
                </div>



                <ion-grid>
                    <ion-item-divider>Horário de cervíço</ion-item-divider>

                    <ion-row>
                        <ion-col size="6">
                            <ion-item>
                                <ion-label>Das</ion-label>
                                <ion-datetime displayFormat="HH:mm" formControlName="open_time"></ion-datetime>
                            </ion-item>
                        </ion-col>
                        <ion-col size="6">
                            <ion-item>
                                <ion-label>até</ion-label>
                                <ion-datetime displayFormat="HH:mm" formControlName="close_time"></ion-datetime>
                            </ion-item>
                        </ion-col>
                    </ion-row>
                </ion-grid>

                <mat-form-field style="width: 100%;" appearance="fill">
                    <mat-label>Descrição</mat-label>
                    <textarea formControlName="desc" matInput></textarea>
                </mat-form-field>




                <div>
                    <button type="button" mat-raised-button mat-button matStepperPrevious>voltar</button>
                    <button type="button" mat-raised-button mat-button matStepperNext>proximo</button>
                </div>
            </mat-step>

            <mat-step label="Finalizar">
                <ion-item-divider></ion-item-divider>
                <br>
                <div>
                    <button type="button" mat-raised-button mat-button matStepperPrevious>voltar</button>
                </div>
                <ion-label color="danger" *ngIf="!explainerForm.valid" text-wrap>
                    <small>Para poder prosseguir tem que preecher todos os campos marcados como abrigatorios.</small>
                </ion-label>
                <ion-button type="submit" [disabled]="!explainerForm.valid" expand="full" color="danger">
                    Submeter e prosseguir
                    <ion-icon slot="end" size="large" name="arrow-forward"></ion-icon>
                </ion-button>
            </mat-step>
        </mat-vertical-stepper>



        <!-- Expand >
        <ion-button-- expand="full">Cadastrar</ion-button-->
    </form>
</ion-content>